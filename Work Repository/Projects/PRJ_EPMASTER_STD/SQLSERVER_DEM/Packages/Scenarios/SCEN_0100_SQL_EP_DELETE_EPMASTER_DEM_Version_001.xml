<?xml version="1.0" encoding="UTF-8"?>
<SunopsisExport>
<Admin RepositoryVersion="05.02.02.11" IsLegacyIdCompatible="false" />
<Encryption algorithm="AES" keyLength="128" exportKeyHash="" keyVect="57chWrcBrxBO67WBluUiEA==" exportKeySalt="3574f249-f881-4946-99b0-ccefcb4166bd" containsCipherText="false"/>
<Object class="com.sunopsis.dwg.dbobj.SnpScen">
		<Field name="CecSessBehavior" type="java.lang.String">null</Field>
	<Field name="CecSessPollIntv" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ExtVersion" type="java.lang.String">null</Field>
	<Field name="FirstDate" type="java.sql.Timestamp">null</Field>
	<Field name="FirstUser" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[f79b0e02-d393-4268-b36f-9160c135bd06]]></Field>
	<Field name="IndChange" type="java.lang.String"><![CDATA[U]]></Field>
	<Field name="IndPromptParam" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="IntVersion" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="IsMaterialized" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IDeploySpec" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IMapping" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IPackage" type="com.sunopsis.sql.DbInt"><![CDATA[25]]></Field>
	<Field name="IPop" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="IScenFolder" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITrt" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ITxtScen" type="com.sunopsis.sql.DbInt"><![CDATA[4487]]></Field>
	<Field name="IVar" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="LastDate" type="java.sql.Timestamp">null</Field>
	<Field name="LastUser" type="java.lang.String"><![CDATA[SUPERVISOR]]></Field>
	<Field name="MaxCecSess" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="RepGuid" type="java.lang.String">null</Field>
	<Field name="RepVersion" type="java.lang.String">null</Field>
	<Field name="RestartType" type="java.lang.String">null</Field>
	<Field name="ScenName" type="java.lang.String"><![CDATA[0100_SQL_EP_DELETE_EPMASTER_DEM]]></Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="ScenSnapshotNo" type="com.sunopsis.sql.DbInt"><![CDATA[4]]></Field>
	<Field name="ScenVersion" type="java.lang.String"><![CDATA[001]]></Field>
	<Field name="VLastDate" type="java.sql.Timestamp">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpExpTxtHeader">
		<Field name="GlobalId" type="java.lang.String"><![CDATA[e1ea9108-ca4e-4184-8662-76a362baf10c]]></Field>
	<Field name="ITxt" type="com.sunopsis.sql.DbInt"><![CDATA[4487]]></Field>
	<Field name="Txt" type="java.lang.String"><![CDATA[STANDARD DEMAND FACTORY PACKAGE FOR EPMASTER CLEANUP PROCEDURE.

STEPS:

- DISABLE CONSTRAINTS
- DELETE TABLES
- INSERT DEFAULT ROWS
- ENABLE CONSTRAINTS


!!! IN ORDER TO ADD TABLES TO THE PROCEDURE, OPEN THE SECOND STEP AND MANAGE THE "OPTIONS" TAB, WITH THE TABLE LIST OF THE TABLES THAT NEEDS TO BE DELETED !!!

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
PACCHETTO STANDARD FACTORY DEMAND PER LA GESTIONE DELLE CANCELLAZIONI SU DB EPMASTER

STEP:

- DISABILITA CONSTRAINTS EPMASTER
- PULIZIA TABELLE
- INSERIMENTO RIGHE DI DEFAULT TABELLE
- ABILITA CONSTRAINTS EPMASTER


!!! PER MODIFICARE LE TABELLE COINVOLTE, APRIRE IL SECONDO STEP E ANDARE SU TAB "OPZIONI", IN CUI SI PUO' EDITARE LA LISTA DI TABELLE. !!! -SCEN_STATUS=VALID]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenStep">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="CleanupOnError" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="ContextCode" type="java.lang.String">null</Field>
	<Field name="FContextCode" type="java.lang.String">null</Field>
	<Field name="GenInfo" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[3ba5c983-f5bd-4045-bba5-d7fb6feb7df3]]></Field>
	<Field name="IndLogMethod" type="java.lang.String"><![CDATA[Y]]></Field>
	<Field name="ITxtVarValue" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="JagentLschemaName" type="java.lang.String">null</Field>
	<Field name="KoExit" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="KoExitCode" type="java.lang.String">null</Field>
	<Field name="KoNextStep" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="KoRetry" type="com.sunopsis.sql.DbInt"><![CDATA[3]]></Field>
	<Field name="KoRetryInterv" type="com.sunopsis.sql.DbInt"><![CDATA[60]]></Field>
	<Field name="LschemaName" type="java.lang.String">null</Field>
	<Field name="MaxErr" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="MaxErrPrct" type="java.lang.String">null</Field>
	<Field name="ModCode" type="java.lang.String">null</Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="OkExit" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="OkExitCode" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="OkNextStep" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="ResName" type="java.lang.String">null</Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="StepName" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS Disable Constraints]]></Field>
	<Field name="StepType" type="java.lang.String"><![CDATA[T]]></Field>
	<Field name="TableName" type="java.lang.String">null</Field>
	<Field name="VarIncr" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="VarLongValue" type="java.lang.String">null</Field>
	<Field name="VarName" type="java.lang.String">null</Field>
	<Field name="VarOp" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenTask">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColEncKey" type="java.lang.String">null</Field>
	<Field name="ColEncKeyVect" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIndEnc" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechIntName" type="java.lang.String">null</Field>
	<Field name="ColTxt" type="java.lang.String">null</Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefEncKey" type="java.lang.String">null</Field>
	<Field name="DefEncKeyVect" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIndEnc" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="DefTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="DefTxt" type="java.lang.String"><![CDATA[USE [<?=odiRef.getCatalogName() ?>]

DECLARE @list_of_tables NVARCHAR(MAX) = N'EP_OC_TESTATA, EP_OC_RIGHE, EP_STO_VENDITE';

if not exists (select * from sysobjects where name='ODI_DELETE_CONSTRAINTS')

CREATE TABLE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS -- feel free to use a permanent table
(
  DISABLE_SCRIPT NVARCHAR(MAX),
  ENABLE_SCRIPT NVARCHAR(MAX),
  DELETE_TABLES NVARCHAR(MAX),
  INSERT_DEFAULTS NVARCHAR(MAX)
);

TRUNCATE TABLE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS; 
  
DECLARE @disable   NVARCHAR(MAX) = N'',
        @enable NVARCHAR(MAX) = N'',
        @delete   NVARCHAR(MAX) = N'',
        @insert NVARCHAR(MAX) = N'';

-- drop is easy, just build a simple concatenated list from sys.foreign_keys:
SELECT @disable += N'
ALTER TABLE ' + '[<?=odiRef.getCatalogName() ?>].' + QUOTENAME(cs.name) + '.' + QUOTENAME(ct.name) 
    + ' NOCHECK CONSTRAINT ' + QUOTENAME(fk.name) + ';'
FROM sys.foreign_keys AS fk
INNER JOIN sys.tables AS ct
  ON fk.parent_object_id = ct.[object_id]
INNER JOIN sys.schemas AS cs 
  ON ct.[schema_id] = cs.[schema_id]
  where  OBJECT_NAME (referenced_object_id) COLLATE SQL_Latin1_General_CP1_CI_AS in (select ltrim(rtrim(value)) from string_split(@list_of_tables,','));

INSERT [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS(DISABLE_SCRIPT) SELECT @disable;

SELECT @delete += N'DELETE FROM [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.' + ltrim(rtrim(value)) + '; '
FROM (select value from string_split(@list_of_tables,',')) P;

UPDATE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS SET DELETE_TABLES = @delete;

SELECT @enable += N'
ALTER TABLE ' + '[<?=odiRef.getCatalogName() ?>].' + QUOTENAME(cs.name) + '.' + QUOTENAME(ct.name) 
    + ' CHECK CONSTRAINT ' + QUOTENAME(fk.name) + ';'
FROM sys.foreign_keys AS fk
INNER JOIN sys.tables AS ct
  ON fk.parent_object_id = ct.[object_id]
INNER JOIN sys.schemas AS cs 
  ON ct.[schema_id] = cs.[schema_id]
  where  OBJECT_NAME (referenced_object_id) COLLATE SQL_Latin1_General_CP1_CI_AS in (select ltrim(rtrim(value)) from string_split(@list_of_tables,','));

UPDATE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS SET ENABLE_SCRIPT = @enable;


if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_PARTI')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_PARTI") ?> (PT_ID_PARTE,PT_ID_VERSIONE,PT_DESCR) VALUES (''*'',''*'',''Part not defined''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_AREE')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_AREE") ?> (AR_ID_AREA,AR_DESCR) VALUES (''*'',''Not assigned''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_CLIENTI')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_CLIENTI") ?> (CU_ID_CLIENTE,CU_DESCR) VALUES (''*'',''Customer not defined''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_CANALI')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_CANALI") ?> (CN_ID_CANALE,CN_DESCR) VALUES (''*'',''Not Assigned''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_DIST_PIANIF_TEST')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_DIST_PIANIF_TEST") ?> (DT_ID_DISTINTA,DT_ID_VERSIONE,DT_DESCR) VALUES (''*'',''*'',''Missing BOM''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_CICLI_PIANIF_TEST')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_CICLI_PIANIF_TEST") ?> (CT_ID_CICLO,CT_ID_VERSIONE,CT_DESCR) VALUES (''*'',''*'',''Missing Routing''); ';

UPDATE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS SET INSERT_DEFAULTS = @insert;]]></Field>
	<Field name="ExeChannel" type="java.lang.String"><![CDATA[J]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[c7da0e94-899f-411a-a574-e0cadb9aa094]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EM]]></Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[10]]></Field>
	<Field name="ParScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="ScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="TaskName1" type="java.lang.String"><![CDATA[Procedure]]></Field>
	<Field name="TaskName2" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS]]></Field>
	<Field name="TaskName3" type="java.lang.String"><![CDATA[Prepare table]]></Field>
	<Field name="TaskType" type="java.lang.String"><![CDATA[S]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenTask">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColEncKey" type="java.lang.String">null</Field>
	<Field name="ColEncKeyVect" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIndEnc" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="ColTechIntName" type="java.lang.String">null</Field>
	<Field name="ColTxt" type="java.lang.String"><![CDATA[select DISABLE_SCRIPT as QUERY from <?=odiRef.getObjectName("ODI_DELETE_CONSTRAINTS") ?>]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefEncKey" type="java.lang.String">null</Field>
	<Field name="DefEncKeyVect" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIndEnc" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="DefTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="DefTxt" type="java.lang.String"><![CDATA[#QUERY]]></Field>
	<Field name="ExeChannel" type="java.lang.String"><![CDATA[J]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[02393a67-4d2b-4fde-9303-5fc5f5055310]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EM]]></Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[20]]></Field>
	<Field name="ParScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="ScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[2]]></Field>
	<Field name="TaskName1" type="java.lang.String"><![CDATA[Procedure]]></Field>
	<Field name="TaskName2" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS]]></Field>
	<Field name="TaskName3" type="java.lang.String"><![CDATA[Disable constraints]]></Field>
	<Field name="TaskType" type="java.lang.String"><![CDATA[S]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenStep">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="CleanupOnError" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="ContextCode" type="java.lang.String">null</Field>
	<Field name="FContextCode" type="java.lang.String">null</Field>
	<Field name="GenInfo" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[e4a5fd3e-2494-4bc3-9cae-541bcbfe5342]]></Field>
	<Field name="IndLogMethod" type="java.lang.String"><![CDATA[Y]]></Field>
	<Field name="ITxtVarValue" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="JagentLschemaName" type="java.lang.String">null</Field>
	<Field name="KoExit" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="KoExitCode" type="java.lang.String">null</Field>
	<Field name="KoNextStep" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="KoRetry" type="com.sunopsis.sql.DbInt"><![CDATA[3]]></Field>
	<Field name="KoRetryInterv" type="com.sunopsis.sql.DbInt"><![CDATA[60]]></Field>
	<Field name="LschemaName" type="java.lang.String">null</Field>
	<Field name="MaxErr" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="MaxErrPrct" type="java.lang.String">null</Field>
	<Field name="ModCode" type="java.lang.String">null</Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="OkExit" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="OkExitCode" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="OkNextStep" type="com.sunopsis.sql.DbInt"><![CDATA[2]]></Field>
	<Field name="ResName" type="java.lang.String">null</Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="StepName" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS Delete tables]]></Field>
	<Field name="StepType" type="java.lang.String"><![CDATA[T]]></Field>
	<Field name="TableName" type="java.lang.String">null</Field>
	<Field name="VarIncr" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="VarLongValue" type="java.lang.String">null</Field>
	<Field name="VarName" type="java.lang.String">null</Field>
	<Field name="VarOp" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenTask">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColEncKey" type="java.lang.String">null</Field>
	<Field name="ColEncKeyVect" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIndEnc" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechIntName" type="java.lang.String">null</Field>
	<Field name="ColTxt" type="java.lang.String">null</Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefEncKey" type="java.lang.String">null</Field>
	<Field name="DefEncKeyVect" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIndEnc" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="DefTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="DefTxt" type="java.lang.String"><![CDATA[USE [<?=odiRef.getCatalogName() ?>]

DECLARE @list_of_tables NVARCHAR(MAX) = N'EP_OC_TESTATA, EP_OC_RIGHE, EP_STO_VENDITE';

if not exists (select * from sysobjects where name='ODI_DELETE_CONSTRAINTS')

CREATE TABLE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS -- feel free to use a permanent table
(
  DISABLE_SCRIPT NVARCHAR(MAX),
  ENABLE_SCRIPT NVARCHAR(MAX),
  DELETE_TABLES NVARCHAR(MAX),
  INSERT_DEFAULTS NVARCHAR(MAX)
);

TRUNCATE TABLE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS; 
  
DECLARE @disable   NVARCHAR(MAX) = N'',
        @enable NVARCHAR(MAX) = N'',
        @delete   NVARCHAR(MAX) = N'',
        @insert NVARCHAR(MAX) = N'';

-- drop is easy, just build a simple concatenated list from sys.foreign_keys:
SELECT @disable += N'
ALTER TABLE ' + '[<?=odiRef.getCatalogName() ?>].' + QUOTENAME(cs.name) + '.' + QUOTENAME(ct.name) 
    + ' NOCHECK CONSTRAINT ' + QUOTENAME(fk.name) + ';'
FROM sys.foreign_keys AS fk
INNER JOIN sys.tables AS ct
  ON fk.parent_object_id = ct.[object_id]
INNER JOIN sys.schemas AS cs 
  ON ct.[schema_id] = cs.[schema_id]
  where  OBJECT_NAME (referenced_object_id) COLLATE SQL_Latin1_General_CP1_CI_AS in (select ltrim(rtrim(value)) from string_split(@list_of_tables,','));

INSERT [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS(DISABLE_SCRIPT) SELECT @disable;

SELECT @delete += N'DELETE FROM [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.' + ltrim(rtrim(value)) + '; '
FROM (select value from string_split(@list_of_tables,',')) P;

UPDATE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS SET DELETE_TABLES = @delete;

SELECT @enable += N'
ALTER TABLE ' + '[<?=odiRef.getCatalogName() ?>].' + QUOTENAME(cs.name) + '.' + QUOTENAME(ct.name) 
    + ' CHECK CONSTRAINT ' + QUOTENAME(fk.name) + ';'
FROM sys.foreign_keys AS fk
INNER JOIN sys.tables AS ct
  ON fk.parent_object_id = ct.[object_id]
INNER JOIN sys.schemas AS cs 
  ON ct.[schema_id] = cs.[schema_id]
  where  OBJECT_NAME (referenced_object_id) COLLATE SQL_Latin1_General_CP1_CI_AS in (select ltrim(rtrim(value)) from string_split(@list_of_tables,','));

UPDATE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS SET ENABLE_SCRIPT = @enable;


if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_PARTI')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_PARTI") ?> (PT_ID_PARTE,PT_ID_VERSIONE,PT_DESCR) VALUES (''*'',''*'',''Part not defined''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_AREE')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_AREE") ?> (AR_ID_AREA,AR_DESCR) VALUES (''*'',''Not assigned''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_CLIENTI')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_CLIENTI") ?> (CU_ID_CLIENTE,CU_DESCR) VALUES (''*'',''Customer not defined''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_CANALI')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_CANALI") ?> (CN_ID_CANALE,CN_DESCR) VALUES (''*'',''Not Assigned''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_DIST_PIANIF_TEST')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_DIST_PIANIF_TEST") ?> (DT_ID_DISTINTA,DT_ID_VERSIONE,DT_DESCR) VALUES (''*'',''*'',''Missing BOM''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_CICLI_PIANIF_TEST')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_CICLI_PIANIF_TEST") ?> (CT_ID_CICLO,CT_ID_VERSIONE,CT_DESCR) VALUES (''*'',''*'',''Missing Routing''); ';

UPDATE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS SET INSERT_DEFAULTS = @insert;]]></Field>
	<Field name="ExeChannel" type="java.lang.String"><![CDATA[J]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[5e9a2f19-9bf2-4011-9b44-d24a0a6ea566]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EM]]></Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[10]]></Field>
	<Field name="ParScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="ScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[3]]></Field>
	<Field name="TaskName1" type="java.lang.String"><![CDATA[Procedure]]></Field>
	<Field name="TaskName2" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS]]></Field>
	<Field name="TaskName3" type="java.lang.String"><![CDATA[Prepare table]]></Field>
	<Field name="TaskType" type="java.lang.String"><![CDATA[S]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenTask">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColEncKey" type="java.lang.String">null</Field>
	<Field name="ColEncKeyVect" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIndEnc" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="ColTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="ColTxt" type="java.lang.String"><![CDATA[select DELETE_TABLES as QUERY from <?=odiRef.getObjectName("ODI_DELETE_CONSTRAINTS") ?>]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefEncKey" type="java.lang.String">null</Field>
	<Field name="DefEncKeyVect" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIndEnc" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="DefTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="DefTxt" type="java.lang.String"><![CDATA[#QUERY]]></Field>
	<Field name="ExeChannel" type="java.lang.String"><![CDATA[J]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[d097c3d6-8b3e-4ede-951a-796311b655fa]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String"><![CDATA[D]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EM]]></Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[30]]></Field>
	<Field name="ParScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="ScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[4]]></Field>
	<Field name="TaskName1" type="java.lang.String"><![CDATA[Procedure]]></Field>
	<Field name="TaskName2" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS]]></Field>
	<Field name="TaskName3" type="java.lang.String"><![CDATA[Delete table]]></Field>
	<Field name="TaskType" type="java.lang.String"><![CDATA[S]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenTask">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColEncKey" type="java.lang.String">null</Field>
	<Field name="ColEncKeyVect" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIndEnc" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="ColTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="ColTxt" type="java.lang.String"><![CDATA[select INSERT_DEFAULTS as QUERY from <?=odiRef.getObjectName("ODI_DELETE_CONSTRAINTS") ?>]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefEncKey" type="java.lang.String">null</Field>
	<Field name="DefEncKeyVect" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIndEnc" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="DefTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="DefTxt" type="java.lang.String"><![CDATA[#QUERY]]></Field>
	<Field name="ExeChannel" type="java.lang.String"><![CDATA[J]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[b0133f1d-841d-415c-9c2b-7564947cef36]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String"><![CDATA[I]]></Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EM]]></Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[40]]></Field>
	<Field name="ParScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="ScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[5]]></Field>
	<Field name="TaskName1" type="java.lang.String"><![CDATA[Procedure]]></Field>
	<Field name="TaskName2" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS]]></Field>
	<Field name="TaskName3" type="java.lang.String"><![CDATA[Insert Default]]></Field>
	<Field name="TaskType" type="java.lang.String"><![CDATA[S]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenStep">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="CleanupOnError" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="ContextCode" type="java.lang.String">null</Field>
	<Field name="FContextCode" type="java.lang.String">null</Field>
	<Field name="GenInfo" type="java.lang.String">null</Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[58cca1a2-65e6-4376-8023-009324916934]]></Field>
	<Field name="IndLogMethod" type="java.lang.String"><![CDATA[Y]]></Field>
	<Field name="ITxtVarValue" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="JagentLschemaName" type="java.lang.String">null</Field>
	<Field name="KoExit" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="KoExitCode" type="java.lang.String">null</Field>
	<Field name="KoNextStep" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="KoRetry" type="com.sunopsis.sql.DbInt"><![CDATA[3]]></Field>
	<Field name="KoRetryInterv" type="com.sunopsis.sql.DbInt"><![CDATA[60]]></Field>
	<Field name="LschemaName" type="java.lang.String">null</Field>
	<Field name="MaxErr" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="MaxErrPrct" type="java.lang.String">null</Field>
	<Field name="ModCode" type="java.lang.String">null</Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[2]]></Field>
	<Field name="OkExit" type="java.lang.String"><![CDATA[1]]></Field>
	<Field name="OkExitCode" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="OkNextStep" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ResName" type="java.lang.String">null</Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="StepName" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS Enable constraints]]></Field>
	<Field name="StepType" type="java.lang.String"><![CDATA[T]]></Field>
	<Field name="TableName" type="java.lang.String">null</Field>
	<Field name="VarIncr" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="VarLongValue" type="java.lang.String">null</Field>
	<Field name="VarName" type="java.lang.String">null</Field>
	<Field name="VarOp" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenTask">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColEncKey" type="java.lang.String">null</Field>
	<Field name="ColEncKeyVect" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIndEnc" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColLschemaName" type="java.lang.String">null</Field>
	<Field name="ColTechIntName" type="java.lang.String">null</Field>
	<Field name="ColTxt" type="java.lang.String">null</Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefEncKey" type="java.lang.String">null</Field>
	<Field name="DefEncKeyVect" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIndEnc" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="DefTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="DefTxt" type="java.lang.String"><![CDATA[USE [<?=odiRef.getCatalogName() ?>]

DECLARE @list_of_tables NVARCHAR(MAX) = N'EP_OC_TESTATA, EP_OC_RIGHE, EP_STO_VENDITE';

if not exists (select * from sysobjects where name='ODI_DELETE_CONSTRAINTS')

CREATE TABLE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS -- feel free to use a permanent table
(
  DISABLE_SCRIPT NVARCHAR(MAX),
  ENABLE_SCRIPT NVARCHAR(MAX),
  DELETE_TABLES NVARCHAR(MAX),
  INSERT_DEFAULTS NVARCHAR(MAX)
);

TRUNCATE TABLE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS; 
  
DECLARE @disable   NVARCHAR(MAX) = N'',
        @enable NVARCHAR(MAX) = N'',
        @delete   NVARCHAR(MAX) = N'',
        @insert NVARCHAR(MAX) = N'';

-- drop is easy, just build a simple concatenated list from sys.foreign_keys:
SELECT @disable += N'
ALTER TABLE ' + '[<?=odiRef.getCatalogName() ?>].' + QUOTENAME(cs.name) + '.' + QUOTENAME(ct.name) 
    + ' NOCHECK CONSTRAINT ' + QUOTENAME(fk.name) + ';'
FROM sys.foreign_keys AS fk
INNER JOIN sys.tables AS ct
  ON fk.parent_object_id = ct.[object_id]
INNER JOIN sys.schemas AS cs 
  ON ct.[schema_id] = cs.[schema_id]
  where  OBJECT_NAME (referenced_object_id) COLLATE SQL_Latin1_General_CP1_CI_AS in (select ltrim(rtrim(value)) from string_split(@list_of_tables,','));

INSERT [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS(DISABLE_SCRIPT) SELECT @disable;

SELECT @delete += N'DELETE FROM [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.' + ltrim(rtrim(value)) + '; '
FROM (select value from string_split(@list_of_tables,',')) P;

UPDATE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS SET DELETE_TABLES = @delete;

SELECT @enable += N'
ALTER TABLE ' + '[<?=odiRef.getCatalogName() ?>].' + QUOTENAME(cs.name) + '.' + QUOTENAME(ct.name) 
    + ' CHECK CONSTRAINT ' + QUOTENAME(fk.name) + ';'
FROM sys.foreign_keys AS fk
INNER JOIN sys.tables AS ct
  ON fk.parent_object_id = ct.[object_id]
INNER JOIN sys.schemas AS cs 
  ON ct.[schema_id] = cs.[schema_id]
  where  OBJECT_NAME (referenced_object_id) COLLATE SQL_Latin1_General_CP1_CI_AS in (select ltrim(rtrim(value)) from string_split(@list_of_tables,','));

UPDATE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS SET ENABLE_SCRIPT = @enable;


if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_PARTI')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_PARTI") ?> (PT_ID_PARTE,PT_ID_VERSIONE,PT_DESCR) VALUES (''*'',''*'',''Part not defined''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_AREE')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_AREE") ?> (AR_ID_AREA,AR_DESCR) VALUES (''*'',''Not assigned''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_CLIENTI')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_CLIENTI") ?> (CU_ID_CLIENTE,CU_DESCR) VALUES (''*'',''Customer not defined''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_CANALI')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_CANALI") ?> (CN_ID_CANALE,CN_DESCR) VALUES (''*'',''Not Assigned''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_DIST_PIANIF_TEST')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_DIST_PIANIF_TEST") ?> (DT_ID_DISTINTA,DT_ID_VERSIONE,DT_DESCR) VALUES (''*'',''*'',''Missing BOM''); ';

if exists (select value from string_split(@list_of_tables,',') where ltrim(rtrim(VALUE))='EP_CICLI_PIANIF_TEST')

SELECT @insert += N'INSERT INTO <?=odiRef.getObjectName("EP_CICLI_PIANIF_TEST") ?> (CT_ID_CICLO,CT_ID_VERSIONE,CT_DESCR) VALUES (''*'',''*'',''Missing Routing''); ';

UPDATE [<?=odiRef.getCatalogName() ?>].<?=odiRef.getSchemaName() ?>.ODI_DELETE_CONSTRAINTS SET INSERT_DEFAULTS = @insert;]]></Field>
	<Field name="ExeChannel" type="java.lang.String"><![CDATA[J]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[b3bb9c74-bdc6-4ef9-b665-260764cd0af5]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EM]]></Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[2]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[10]]></Field>
	<Field name="ParScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="ScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[6]]></Field>
	<Field name="TaskName1" type="java.lang.String"><![CDATA[Procedure]]></Field>
	<Field name="TaskName2" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS]]></Field>
	<Field name="TaskName3" type="java.lang.String"><![CDATA[Prepare table]]></Field>
	<Field name="TaskType" type="java.lang.String"><![CDATA[S]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpScenTask">
		<Field name="BrpId" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ColConnectId" type="java.lang.String">null</Field>
	<Field name="ColContextCode" type="java.lang.String">null</Field>
	<Field name="ColEncKey" type="java.lang.String">null</Field>
	<Field name="ColEncKeyVect" type="java.lang.String">null</Field>
	<Field name="ColIndCommit" type="java.lang.String">null</Field>
	<Field name="ColIndEnc" type="java.lang.String">null</Field>
	<Field name="ColIsolLevel" type="java.lang.String">null</Field>
	<Field name="ColLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="ColTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="ColTxt" type="java.lang.String"><![CDATA[select ENABLE_SCRIPT as QUERY from <?=odiRef.getObjectName("ODI_DELETE_CONSTRAINTS") ?>]]></Field>
	<Field name="DefConnectId" type="java.lang.String">null</Field>
	<Field name="DefContextCode" type="java.lang.String">null</Field>
	<Field name="DefEncKey" type="java.lang.String">null</Field>
	<Field name="DefEncKeyVect" type="java.lang.String">null</Field>
	<Field name="DefIndCommit" type="java.lang.String">null</Field>
	<Field name="DefIndEnc" type="java.lang.String">null</Field>
	<Field name="DefIsolLevel" type="java.lang.String">null</Field>
	<Field name="DefLschemaName" type="java.lang.String"><![CDATA[SQLSERVER_EPMASTER]]></Field>
	<Field name="DefTechIntName" type="java.lang.String"><![CDATA[MICROSOFT_SQL_SERVER]]></Field>
	<Field name="DefTxt" type="java.lang.String"><![CDATA[#QUERY]]></Field>
	<Field name="ExeChannel" type="java.lang.String"><![CDATA[J]]></Field>
	<Field name="GlobalId" type="java.lang.String"><![CDATA[9dcec873-9caa-4827-a295-421138cdadfb]]></Field>
	<Field name="IndErr" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogFinalCmd" type="java.lang.String"><![CDATA[0]]></Field>
	<Field name="IndLogMethod" type="java.lang.String">null</Field>
	<Field name="IndLogNb" type="java.lang.String">null</Field>
	<Field name="LogLevDet" type="java.lang.String"><![CDATA[3]]></Field>
	<Field name="MapTaskType" type="java.lang.String"><![CDATA[EM]]></Field>
	<Field name="Nno" type="com.sunopsis.sql.DbInt"><![CDATA[2]]></Field>
	<Field name="OrdTrt" type="com.sunopsis.sql.DbInt"><![CDATA[50]]></Field>
	<Field name="ParScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[null]]></Field>
	<Field name="ScenNo" type="com.sunopsis.sql.DbInt"><![CDATA[18]]></Field>
	<Field name="ScenTaskNo" type="com.sunopsis.sql.DbInt"><![CDATA[7]]></Field>
	<Field name="TaskName1" type="java.lang.String"><![CDATA[Procedure]]></Field>
	<Field name="TaskName2" type="java.lang.String"><![CDATA[SQL_STD_DELETE_AND_ENABLE_DISABLE_CONSTRAINTS]]></Field>
	<Field name="TaskName3" type="java.lang.String"><![CDATA[Enable constraints]]></Field>
	<Field name="TaskType" type="java.lang.String"><![CDATA[S]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_EXPTXTHEADER.4487]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[e1ea9108-ca4e-4184-8662-76a362baf10c]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_PACKAGE.25]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[c4ac5d61-02f0-47e5-b7e8-e1b9c1baf467]]></Field>
 <Field name="RefObjFQName" type="java.lang.String"><![CDATA[PRJ_EPMASTER_STD.SQLSERVER_DEM.0100_SQL_DELETE_EPMASTER_DEM]]></Field>
 <Field name="RefObjFQType" type="java.lang.String"><![CDATA[SNP_PROJECT.SNP_FOLDER.SNP_PACKAGE]]></Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String"><![CDATA[16.13.28]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_SCEN.18]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[f79b0e02-d393-4268-b36f-9160c135bd06]]></Field>
 <Field name="RefObjFQName" type="java.lang.String"><![CDATA[PRJ_EPMASTER_STD.SQLSERVER_DEM.0100_SQL_DELETE_EPMASTER_DEM.0100_SQL_EP_DELETE_EPMASTER_DEM Version 001]]></Field>
 <Field name="RefObjFQType" type="java.lang.String"><![CDATA[SNP_PROJECT.SNP_FOLDER.SNP_PACKAGE.SNP_SCEN]]></Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String"><![CDATA[16.13.28.43]]></Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_SCENSTEP.18.0]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[3ba5c983-f5bd-4045-bba5-d7fb6feb7df3]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_SCENSTEP.18.1]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[e4a5fd3e-2494-4bc3-9cae-541bcbfe5342]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpFKXRef">
		<Field name="RefKey" type="java.lang.String"><![CDATA[SNP_SCENSTEP.18.2]]></Field>
	<Field name="RefObjGlobalId" type="java.lang.String"><![CDATA[58cca1a2-65e6-4376-8023-009324916934]]></Field>
 <Field name="RefObjFQName" type="java.lang.String">null</Field>
 <Field name="RefObjFQType" type="java.lang.String">null</Field>
 <Field name="RefObjFQNameLengths" type="java.lang.String">null</Field>
</Object>
<Object class="com.sunopsis.dwg.dbobj.SnpImportRep">
		<Field name="GlobalId" type="java.lang.String"><![CDATA[208f28e6-058f-48ac-b2e6-b9eb1154d8dc]]></Field>
	<Field name="RepGuid" type="java.lang.String">null</Field>
	<Field name="RepShortId" type="com.sunopsis.sql.DbInt"><![CDATA[11]]></Field>
	<Field name="RepTimestamp" type="java.lang.String"><![CDATA[1732629246076]]></Field>
</Object>
<Object class="com.sunopsis.dwg.DwgExportSummary">
		<Field name="ExpTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="InstObjNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="JoinColNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="JoinNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="KeyColNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="KeyNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="LinkDiagNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="MorigTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="MtxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="OrigTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="OtherObjectsNb" type="com.sunopsis.sql.DbInt"><![CDATA[11]]></Field>
	<Field name="PlanAgentNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="StepNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="TxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="UeOrigNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="UeUsedNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="VarPlanAgentNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="ScenTxtNb" type="com.sunopsis.sql.DbInt"><![CDATA[0]]></Field>
	<Field name="OdiVersion" type="java.lang.String"><![CDATA[12.2.1]]></Field>
	<Field name="OriginRepositoryID" type="com.sunopsis.sql.DbInt"><![CDATA[1]]></Field>
	<Field name="RepositoryVersion" type="java.lang.String"><![CDATA[05.02.02.11]]></Field>
</Object>
</SunopsisExport>
